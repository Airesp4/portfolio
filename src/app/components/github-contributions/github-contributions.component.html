<div class="bg-slate-800 rounded-2xl p-8 my-6 border border-slate-700 shadow-xl overflow-hidden max-w-5xl mx-auto">
  
  <!-- Loading State -->
  <div *ngIf="loading" class="flex flex-col items-center justify-center py-20 text-slate-400 gap-6">
    <div class="relative">
      <div class="w-16 h-16 border-4 border-slate-600 border-t-green-500 rounded-full animate-spin"></div>
      <div class="absolute inset-0 w-16 h-16 border-4 border-transparent border-r-green-500 rounded-full animate-spin" 
           style="animation-delay: 150ms;"></div>
    </div>
    <span class="text-xl font-medium">Loading contributions...</span>
  </div>

  <!-- Error State -->
  <div *ngIf="error && !loading" class="flex items-center justify-center py-12">
    <div class="text-center">
      <div class="text-red-400 font-medium mb-2">Error loading contributions</div>
      <div class="text-sm text-slate-400">{{ error }}</div>
    </div>
  </div>

  <!-- Main Content -->
  <div *ngIf="data && !loading && !error">
    <!-- Header -->
    <div class="flex justify-between items-center mb-6">
      <h2 class="text-lg font-medium text-white">
        {{ data.totalContributions }} contributions in the last year
      </h2>
      <button class="flex items-center gap-2 text-sm text-gray-400 hover:text-gray-300 transition-colors">
        <span>Contribution settings</span>
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path>
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
        </svg>
      </button>
    </div>

    <!-- Contribution Grid -->
    <div class="bg-slate-900/50 rounded-lg p-6 border border-slate-700/50">
      <div class="space-y-6 w-full">
        
        <!-- Month Labels -->
        <div class="flex w-full">
          <div class="w-10 flex-shrink-0"></div>
          <div class="flex-1 relative h-6">
            <span *ngFor="let month of monthLabels" 
                  class="absolute text-sm text-gray-400 transform -translate-x-1/2"
                  [style.left]="getMonthPosition(month.weekIndex)">
              {{ month.name }}
            </span>
          </div>
        </div>

        <!-- Grid Container -->
        <div class="flex w-full">
          <!-- Weekday Labels -->
          <div class="flex flex-col gap-0.5 text-xs text-gray-400 pr-2 w-10 flex-shrink-0">
            <div *ngFor="let day of weekdays" class="h-2.5 flex items-center">
              {{ day }}
            </div>
          </div>

          <!-- Contribution Squares -->
          <div class="flex-1 flex justify-between">
            <div *ngFor="let week of data.weeks; let weekIndex = index" class="flex flex-col gap-0.5">
              <div *ngFor="let day of week.days; let dayIndex = index"
                   class="w-2.5 h-2.5 rounded-sm cursor-pointer transition-all duration-200 hover:ring-1 hover:ring-gray-400 hover:ring-offset-1 hover:scale-110"
                   [class]="getContributionColor(day.level)"
                   (mouseenter)="showTooltip(day, $event)"
                   (mouseleave)="hideTooltip()">
              </div>
            </div>
          </div>
        </div>

        <!-- Footer -->
        <div class="flex justify-end items-center text-sm text-gray-400 pt-2">
          <div class="flex items-center gap-2">
            <span>Less</span>
            <div class="flex gap-0.5">
              <div *ngFor="let level of contributionLevels" 
                   class="w-2.5 h-2.5 rounded-sm"
                   [class]="getContributionColor(level)">
              </div>
            </div>
            <span>More</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Stats Cards -->
    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mt-6">
      <div class="bg-slate-700/30 rounded-lg p-4 border border-slate-600/50 hover:bg-slate-700/50 transition-colors">
        <div class="flex items-center gap-2 mb-2">
          <svg class="w-4 h-4 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <circle cx="12" cy="12" r="3"></circle>
            <path d="M12 1v6m0 6v6m11-7h-6m-6 0H1"></path>
          </svg>
          <span class="text-sm text-gray-400">Total Contributions</span>
        </div>
        <div class="text-2xl font-bold text-white">{{ data.totalContributions | number }}</div>
      </div>

      <div class="bg-slate-700/30 rounded-lg p-4 border border-slate-600/50 hover:bg-slate-700/50 transition-colors">
        <div class="flex items-center gap-2 mb-2">
          <svg class="w-4 h-4 text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
            <line x1="16" y1="2" x2="16" y2="6"></line>
            <line x1="8" y1="2" x2="8" y2="6"></line>
            <line x1="3" y1="10" x2="21" y2="10"></line>
          </svg>
          <span class="text-sm text-gray-400">Active Weeks</span>
        </div>
        <div class="text-2xl font-bold text-white">{{ getActiveWeeks() }} weeks</div>
      </div>

      <div class="bg-slate-700/30 rounded-lg p-4 border border-slate-600/50 hover:bg-slate-700/50 transition-colors">
        <div class="flex items-center gap-2 mb-2">
          <svg class="w-4 h-4 text-purple-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <polyline points="23,6 13.5,15.5 8.5,10.5 1,18"></polyline>
            <polyline points="17,6 23,6 23,12"></polyline>
          </svg>
          <span class="text-sm text-gray-400">Longest Streak</span>
        </div>
        <div class="text-2xl font-bold text-white">{{ getLongestStreak() }} days</div>
      </div>

      <div class="bg-slate-700/30 rounded-lg p-4 border border-slate-600/50 hover:bg-slate-700/50 transition-colors">
        <div class="flex items-center gap-2 mb-2">
          <svg class="w-4 h-4 text-orange-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <line x1="18" y1="20" x2="18" y2="10"></line>
            <line x1="12" y1="20" x2="12" y2="4"></line>
            <line x1="6" y1="20" x2="6" y2="14"></line>
          </svg>
          <span class="text-sm text-gray-400">User</span>
        </div>
        <div class="text-2xl font-bold text-white">{{ data.user.login }}</div>
      </div>
    </div>

    <!-- Collaboration Card -->
    <div class="bg-gradient-to-br from-slate-700/50 to-slate-800/50 border border-slate-600 rounded-2xl p-8 mt-10 backdrop-blur-sm">
      <div class="mb-6">
        <div class="flex items-center gap-3 text-green-400 font-medium">
          <div class="relative">
            <div class="w-4 h-4 bg-green-400 rounded-full animate-pulse"></div>
            <div class="absolute inset-0 w-4 h-4 bg-green-400 rounded-full animate-ping opacity-75"></div>
          </div>
          <span class="text-xl font-semibold">Available for collaboration</span>
        </div>
      </div>

      <div class="space-y-6">
        <div>
          <h3 class="text-white text-3xl font-extrabold mb-4 bg-gradient-to-r from-white to-slate-300 bg-clip-text text-transparent">
            Open to new projects
          </h3>
          <p class="text-slate-300 leading-relaxed text-lg">
            Passionate developer focused on solving problems through programming. 
            Always seeking new challenges and growth opportunities.
          </p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div class="flex items-center gap-3 text-slate-200 bg-slate-700/30 rounded-xl p-4 border border-slate-600/50 shadow-inner">
            <div class="w-12 h-12 bg-green-400/20 rounded-xl flex items-center justify-center flex-shrink-0">
              <svg class="w-6 h-6 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                <line x1="16" y1="2" x2="16" y2="6"></line>
                <line x1="8" y1="2" x2="8" y2="6"></line>
                <line x1="3" y1="10" x2="21" y2="10"></line>
              </svg>
            </div>
            <div>
              <div class="font-medium text-lg text-slate-100">Availability</div>
              <div class="text-green-400 text-base">Immediate</div>
            </div>
          </div>

          <div class="flex items-center gap-3 text-slate-200 bg-slate-700/30 rounded-xl p-4 border border-slate-600/50 shadow-inner">
            <div class="w-12 h-12 bg-orange-400/20 rounded-xl flex items-center justify-center flex-shrink-0">
              <span class="text-2xl">ðŸ’¼</span>
            </div>
            <div>
              <div class="font-medium text-lg text-slate-100">Type</div>
              <div class="text-orange-400 text-base">Freelance & Full-time</div>
            </div>
          </div>

          <div class="flex items-center gap-3 text-slate-200 bg-slate-700/30 rounded-xl p-4 border border-slate-600/50 shadow-inner">
            <div class="w-12 h-12 bg-purple-400/20 rounded-xl flex items-center justify-center flex-shrink-0">
              <span class="text-2xl">ðŸŽ¯</span>
            </div>
            <div>
              <div class="font-medium text-lg text-slate-100">Focus</div>
              <div class="text-purple-400 text-base">Java, Spring Boot, Angular</div>
            </div>
          </div>

          <div class="flex items-center gap-3 text-slate-200 bg-slate-700/30 rounded-xl p-4 border border-slate-600/50 shadow-inner">
            <div class="w-12 h-12 bg-orange-400/20 rounded-xl flex items-center justify-center flex-shrink-0">
              <svg class="w-6 h-6 text-orange-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <line x1="18" y1="20" x2="18" y2="10"></line>
                <line x1="12" y1="20" x2="12" y2="4"></line>
                <line x1="6" y1="20" x2="6" y2="14"></line>
              </svg>
            </div>
            <div>
              <div class="font-medium text-lg text-slate-100">Total</div>
              <div class="text-orange-400 text-base">{{ data.totalContributions }} contributions</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Tooltip -->
  <div *ngIf="tooltipVisible && tooltipDay"
       class="fixed z-50 px-3 py-2 text-sm bg-gray-900 text-white rounded-lg shadow-lg pointer-events-none transform -translate-x-1/2 -translate-y-full"
       [style.left.px]="tooltipX"
       [style.top.px]="tooltipY">
    <div class="font-medium">{{ formatDate(tooltipDay.date) }}</div>
    <div class="text-gray-300">
      {{ tooltipDay.count }} {{ tooltipDay.count === 1 ? 'contribution' : 'contributions' }}
    </div>
    <div class="absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-900"></div>
  </div>
</div>